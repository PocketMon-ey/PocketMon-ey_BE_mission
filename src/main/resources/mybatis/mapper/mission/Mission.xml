<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pocketmoney.mission.dao.MissionDao">
	<insert id="insertMission" parameterType="com.pocketmoney.mission.model.Mission">
        insert into missionDB.Mission
        (name, reward, childId, createDate) value (#{name}, #{reward}, #{childId}, #{createDate});
    </insert>
    <select id="selectMission" resultType="com.pocketmoney.mission.model.Mission">
			select
				id,
                name,
                reward,
                status,
                childId,
                createDate,
                doneDate
			from missionDB.Mission
            where id = #{id};
	</select>
    <select id="selecAllMissions" resultType="com.pocketmoney.mission.model.Mission">
			select
				id,
                name,
                reward,
                status,
                childId,
                createDate,
                doneDate
			from missionDB.Mission
            <if test="status = 0 or status = 1">
			    WHERE status = #{status};
		    </if>
            <if test="status = 2 or status = 3">
			    WHERE status = 2 or status = 3;
		    </if>
            ORDER BY id DESC;
	</select>
	<update id="updateStatus" parameterType="com.pocketmoney.mission.model.StatusParam">
        update missionDB.Mission set status=#{status}
        <if test="status = 0">
            set status=#{status}
        </if>
        <if test="status=2 or status=3">
            set status=#{status}, doneDate = now
        </if>
        where id=#{id};
    </update>
</mapper>